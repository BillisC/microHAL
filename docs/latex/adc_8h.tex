\doxysection{src/drivers/adc.h File Reference}
\hypertarget{adc_8h}{}\label{adc_8h}\index{src/drivers/adc.h@{src/drivers/adc.h}}


Function prototypes for the ADC driver.  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include "{}stm32f4xx.\+h"{}}\newline
{\ttfamily \#include "{}defines.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structADCRegs}{ADCRegs}}
\begin{DoxyCompactList}\small\item\em Contains ADC registers. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structADCCommonRegs}{ADCCommon\+Regs}}
\begin{DoxyCompactList}\small\item\em Contains ADC common registers. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structADCModes}{ADCModes}}
\begin{DoxyCompactList}\small\item\em Contains ADC conversion modes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{adc_8h_af05e855b08a63eae6eaef378e1fb15c6}{ADC\+\_\+}}(NUM)
\item 
\Hypertarget{adc_8h_a435a3a89417f788d4d23f161c01bda5f}\label{adc_8h_a435a3a89417f788d4d23f161c01bda5f} 
\#define {\bfseries ADC\+\_\+\+COMMON}~(struct \mbox{\hyperlink{structADCCommonRegs}{ADCCommon\+Regs}} \texorpdfstring{$\ast$}{*})(ADC123\+\_\+\+COMMON\+\_\+\+BASE)
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{adc_8h_ac890f1a91e1b8569617cd846532cc536}\label{adc_8h_ac890f1a91e1b8569617cd846532cc536} 
typedef enum \mbox{\hyperlink{adc_8h_a410b7633747a1ebac95080b763a143e7}{adc\+\_\+peripheral}} {\bfseries adc\+\_\+peripheral\+\_\+t}
\begin{DoxyCompactList}\small\item\em Available ADC peripherals. \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_a87e2393c3b4be47adb2d3ee1dd3f6f46}\label{adc_8h_a87e2393c3b4be47adb2d3ee1dd3f6f46} 
typedef enum \mbox{\hyperlink{adc_8h_a30443b7af1623e41bf412fcecb632f22}{adc\+\_\+res}} {\bfseries adc\+\_\+res\+\_\+t}
\begin{DoxyCompactList}\small\item\em Available ADC resolutions. \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_a4febcf1b622069decb576e94f52f12b4}\label{adc_8h_a4febcf1b622069decb576e94f52f12b4} 
typedef enum \mbox{\hyperlink{adc_8h_adac5df7f2a1fa6df2915490437034183}{adc\+\_\+trigger}} {\bfseries adc\+\_\+trigger\+\_\+t}
\begin{DoxyCompactList}\small\item\em Available ADC trigger modes. \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_a1dc8ca1b8b76af313c51ecba2aa6117d}\label{adc_8h_a1dc8ca1b8b76af313c51ecba2aa6117d} 
typedef enum \mbox{\hyperlink{adc_8h_af706589396e514e32045fff1b19f3eaf}{adc\+\_\+samplerate}} {\bfseries adc\+\_\+samplerate\+\_\+t}
\begin{DoxyCompactList}\small\item\em Available ADC samplerates (in cycles) \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_a4b541ef455f3a62ac2ef51347e117921}\label{adc_8h_a4b541ef455f3a62ac2ef51347e117921} 
typedef enum \mbox{\hyperlink{adc_8h_a02634359ec7ce6df8aa4dbda146bf49d}{adc\+\_\+prescaler}} {\bfseries adc\+\_\+prescaler\+\_\+t}
\begin{DoxyCompactList}\small\item\em Available ADC prescaler dividers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{adc_8h_a410b7633747a1ebac95080b763a143e7}\label{adc_8h_a410b7633747a1ebac95080b763a143e7} 
enum \mbox{\hyperlink{adc_8h_a410b7633747a1ebac95080b763a143e7}{adc\+\_\+peripheral}} \{ {\bfseries ADC\+\_\+\+PERIPH\+\_\+\+LEN}
 \}
\begin{DoxyCompactList}\small\item\em Available ADC peripherals. \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_a30443b7af1623e41bf412fcecb632f22}\label{adc_8h_a30443b7af1623e41bf412fcecb632f22} 
enum \mbox{\hyperlink{adc_8h_a30443b7af1623e41bf412fcecb632f22}{adc\+\_\+res}} \{ {\bfseries ADC\+\_\+\+RES\+\_\+\+B12} = 0x00
, {\bfseries ADC\+\_\+\+RES\+\_\+\+B10} = 0x01
, {\bfseries ADC\+\_\+\+RES\+\_\+\+B08} = 0x02
, {\bfseries ADC\+\_\+\+RES\+\_\+\+B06} = 0x03
 \}
\begin{DoxyCompactList}\small\item\em Available ADC resolutions. \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_adac5df7f2a1fa6df2915490437034183}\label{adc_8h_adac5df7f2a1fa6df2915490437034183} 
enum \mbox{\hyperlink{adc_8h_adac5df7f2a1fa6df2915490437034183}{adc\+\_\+trigger}} \{ {\bfseries ADC\+\_\+\+TRIGGER\+\_\+\+NONE} = 0x00
, {\bfseries ADC\+\_\+\+TRIGGER\+\_\+\+RISE} = 0x01
, {\bfseries ADC\+\_\+\+TRIGGER\+\_\+\+FALL} = 0x02
, {\bfseries ADC\+\_\+\+TRIGGER\+\_\+\+BOTH} = 0x03
 \}
\begin{DoxyCompactList}\small\item\em Available ADC trigger modes. \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_af706589396e514e32045fff1b19f3eaf}\label{adc_8h_af706589396e514e32045fff1b19f3eaf} 
enum \mbox{\hyperlink{adc_8h_af706589396e514e32045fff1b19f3eaf}{adc\+\_\+samplerate}} \{ \newline
{\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C003} = 0x00
, {\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C015} = 0x01
, {\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C028} = 0x02
, {\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C056} = 0x03
, \newline
{\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C084} = 0x04
, {\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C112} = 0x05
, {\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C144} = 0x06
, {\bfseries ADC\+\_\+\+SAMPLERATE\+\_\+\+C480} = 0x07
 \}
\begin{DoxyCompactList}\small\item\em Available ADC samplerates (in cycles) \end{DoxyCompactList}\item 
\Hypertarget{adc_8h_a02634359ec7ce6df8aa4dbda146bf49d}\label{adc_8h_a02634359ec7ce6df8aa4dbda146bf49d} 
enum \mbox{\hyperlink{adc_8h_a02634359ec7ce6df8aa4dbda146bf49d}{adc\+\_\+prescaler}} \{ {\bfseries ADC\+\_\+\+PRESCALER\+\_\+\+DIV2} = 0x00
, {\bfseries ADC\+\_\+\+PRESCALER\+\_\+\+DIV4} = 0x01
, {\bfseries ADC\+\_\+\+PRESCALER\+\_\+\+DIV6} = 0x02
, {\bfseries ADC\+\_\+\+PRESCALER\+\_\+\+DIV8} = 0x03
 \}
\begin{DoxyCompactList}\small\item\em Available ADC prescaler dividers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{adc_8h_a9eb3c8478c8926f4e9c752516151a953}{adc\+\_\+set\+\_\+prescaler}} (const \mbox{\hyperlink{adc_8h_a4b541ef455f3a62ac2ef51347e117921}{adc\+\_\+prescaler\+\_\+t}} value)
\begin{DoxyCompactList}\small\item\em Sets the ADC Prescaler divider to the specified value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{adc_8h_a3bbde0c6d10ba0b901cc5a48e450ae13}{adc\+\_\+set\+\_\+resolution}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc, const \mbox{\hyperlink{adc_8h_a87e2393c3b4be47adb2d3ee1dd3f6f46}{adc\+\_\+res\+\_\+t}} value)
\begin{DoxyCompactList}\small\item\em Sets the ADC resolution to the specified value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{adc_8h_ae7824573bf9df8005a2f8c52140d145e}{adc\+\_\+set\+\_\+samplerate}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc, const uint8\+\_\+t channel, const \mbox{\hyperlink{adc_8h_a1dc8ca1b8b76af313c51ecba2aa6117d}{adc\+\_\+samplerate\+\_\+t}} value)
\begin{DoxyCompactList}\small\item\em Sets the ADC sampling rate to the specified value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{adc_8h_af35a9a05504a42f59183138faf1eb5a0}{adc\+\_\+set\+\_\+modes}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc, const struct \mbox{\hyperlink{structADCModes}{ADCModes}} config)
\begin{DoxyCompactList}\small\item\em Sets the ADC modes according to the configuration. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{adc_8h_aa7a57e5f8b11e9e5ef98982182aa3ccd}{adc\+\_\+set\+\_\+seq}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}seq, const uint8\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Sets the ADC conversion sequence to the specified order. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{adc_8h_af5f68b54ec814d60d816e5b7c6790460}{adc\+\_\+on}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc)
\begin{DoxyCompactList}\small\item\em Starts the ADC conversion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{adc_8h_acc4fc086eaa6a8f530eb4d641e8d4a44}{adc\+\_\+off}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc)
\begin{DoxyCompactList}\small\item\em Stops the ADC conversion. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{adc_8h_a620a299bdb8d0d8785d7ddaebff7f86c}{adc\+\_\+read}} (const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}} adc)
\begin{DoxyCompactList}\small\item\em Reads the last ADC conversion result. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Function prototypes for the ADC driver. 

This file contains all of the enums, macros, and function prototypes required for a functional ADC driver.

DISCLAIMER\+: Only for regular channels in single / continuous / discontinuous modes. Injected channels may be implemented later.

\begin{DoxyAuthor}{Author}
Vasileios Ch. (BillisC) 
\end{DoxyAuthor}
\begin{DoxyRefDesc}{Bug}
\item[\mbox{\hyperlink{bug__bug000003}{Bug}}]None, yet. \end{DoxyRefDesc}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{adc_8h_af05e855b08a63eae6eaef378e1fb15c6}\index{adc.h@{adc.h}!ADC\_@{ADC\_}}
\index{ADC\_@{ADC\_}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{ADC\_}{ADC\_}}
{\footnotesize\ttfamily \label{adc_8h_af05e855b08a63eae6eaef378e1fb15c6} 
\#define ADC\+\_\+(\begin{DoxyParamCaption}\item[{}]{NUM}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structADCRegs}{ADCRegs}}\ *)(ADC1\_BASE\ +\ (0x100UL\ *\ ((uint8\_t)NUM)))}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{adc_8h_acc4fc086eaa6a8f530eb4d641e8d4a44}\index{adc.h@{adc.h}!adc\_off@{adc\_off}}
\index{adc\_off@{adc\_off}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_off()}{adc\_off()}}
{\footnotesize\ttfamily \label{adc_8h_acc4fc086eaa6a8f530eb4d641e8d4a44} 
void adc\+\_\+off (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{}\end{DoxyParamCaption})}



Stops the ADC conversion. 

The ADC will be powered off upon calling this command and instantly stop the conversion procedure.


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\Hypertarget{adc_8h_af5f68b54ec814d60d816e5b7c6790460}\index{adc.h@{adc.h}!adc\_on@{adc\_on}}
\index{adc\_on@{adc\_on}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_on()}{adc\_on()}}
{\footnotesize\ttfamily \label{adc_8h_af5f68b54ec814d60d816e5b7c6790460} 
void adc\+\_\+on (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{}\end{DoxyParamCaption})}



Starts the ADC conversion. 

The ADC will be powered on upon calling this command and start the conversion procedure as configured. Dummy reads are included.


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\Hypertarget{adc_8h_a620a299bdb8d0d8785d7ddaebff7f86c}\index{adc.h@{adc.h}!adc\_read@{adc\_read}}
\index{adc\_read@{adc\_read}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_read()}{adc\_read()}}
{\footnotesize\ttfamily \label{adc_8h_a620a299bdb8d0d8785d7ddaebff7f86c} 
uint16\+\_\+t adc\+\_\+read (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{}\end{DoxyParamCaption})}



Reads the last ADC conversion result. 


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The conversion result 
\end{DoxyReturn}
\Hypertarget{adc_8h_af35a9a05504a42f59183138faf1eb5a0}\index{adc.h@{adc.h}!adc\_set\_modes@{adc\_set\_modes}}
\index{adc\_set\_modes@{adc\_set\_modes}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_set\_modes()}{adc\_set\_modes()}}
{\footnotesize\ttfamily \label{adc_8h_af35a9a05504a42f59183138faf1eb5a0} 
void adc\+\_\+set\+\_\+modes (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{, }\item[{const struct \mbox{\hyperlink{structADCModes}{ADCModes}}}]{config}{}\end{DoxyParamCaption})}



Sets the ADC modes according to the configuration. 

The configuration values are specified within the adc\+\_\+config struct. Some modes may not work as expected yet.


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
{\em config} & The ADC configuration \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\Hypertarget{adc_8h_a9eb3c8478c8926f4e9c752516151a953}\index{adc.h@{adc.h}!adc\_set\_prescaler@{adc\_set\_prescaler}}
\index{adc\_set\_prescaler@{adc\_set\_prescaler}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_set\_prescaler()}{adc\_set\_prescaler()}}
{\footnotesize\ttfamily \label{adc_8h_a9eb3c8478c8926f4e9c752516151a953} 
void adc\+\_\+set\+\_\+prescaler (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_a4b541ef455f3a62ac2ef51347e117921}{adc\+\_\+prescaler\+\_\+t}}}]{value}{}\end{DoxyParamCaption})}



Sets the ADC Prescaler divider to the specified value. 

The available dividers for the ADC Prescaler are specified in the adc\+\_\+prescaler\+\_\+t enum. Any other value will be ignored.


\begin{DoxyParams}{Parameters}
{\em value} & The prescaler divider value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\Hypertarget{adc_8h_a3bbde0c6d10ba0b901cc5a48e450ae13}\index{adc.h@{adc.h}!adc\_set\_resolution@{adc\_set\_resolution}}
\index{adc\_set\_resolution@{adc\_set\_resolution}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_set\_resolution()}{adc\_set\_resolution()}}
{\footnotesize\ttfamily \label{adc_8h_a3bbde0c6d10ba0b901cc5a48e450ae13} 
void adc\+\_\+set\+\_\+resolution (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{, }\item[{const \mbox{\hyperlink{adc_8h_a87e2393c3b4be47adb2d3ee1dd3f6f46}{adc\+\_\+res\+\_\+t}}}]{value}{}\end{DoxyParamCaption})}



Sets the ADC resolution to the specified value. 

The available resolutions for the ADC channel reads are specified in the adc\+\_\+res\+\_\+t enum. Any other value will be ignored.


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
{\em value} & The resolution of the ADC conversions \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\Hypertarget{adc_8h_ae7824573bf9df8005a2f8c52140d145e}\index{adc.h@{adc.h}!adc\_set\_samplerate@{adc\_set\_samplerate}}
\index{adc\_set\_samplerate@{adc\_set\_samplerate}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_set\_samplerate()}{adc\_set\_samplerate()}}
{\footnotesize\ttfamily \label{adc_8h_ae7824573bf9df8005a2f8c52140d145e} 
void adc\+\_\+set\+\_\+samplerate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{, }\item[{const uint8\+\_\+t}]{channel}{, }\item[{const \mbox{\hyperlink{adc_8h_a1dc8ca1b8b76af313c51ecba2aa6117d}{adc\+\_\+samplerate\+\_\+t}}}]{value}{}\end{DoxyParamCaption})}



Sets the ADC sampling rate to the specified value. 

The available sampling rates for the ADC channel reads are specified in the adc\+\_\+res\+\_\+t enum (in clock cycles). Any other value will be ignored.


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
{\em channel} & The selected channel (0..19) \\
\hline
{\em value} & The clock cycles of the ADC conversions \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\Hypertarget{adc_8h_aa7a57e5f8b11e9e5ef98982182aa3ccd}\index{adc.h@{adc.h}!adc\_set\_seq@{adc\_set\_seq}}
\index{adc\_set\_seq@{adc\_set\_seq}!adc.h@{adc.h}}
\doxysubsubsection{\texorpdfstring{adc\_set\_seq()}{adc\_set\_seq()}}
{\footnotesize\ttfamily \label{adc_8h_aa7a57e5f8b11e9e5ef98982182aa3ccd} 
void adc\+\_\+set\+\_\+seq (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{adc_8h_ac890f1a91e1b8569617cd846532cc536}{adc\+\_\+peripheral\+\_\+t}}}]{adc}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{seq}{, }\item[{const uint8\+\_\+t}]{count}{}\end{DoxyParamCaption})}



Sets the ADC conversion sequence to the specified order. 

The sequence consists of 16 5-\/bit elements. Bits 6..8 will be ignored.


\begin{DoxyParams}{Parameters}
{\em adc} & The selected ADC \\
\hline
{\em seq} & Pointer to channel conversion sequence array \\
\hline
{\em count} & The total amount of conversions \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
