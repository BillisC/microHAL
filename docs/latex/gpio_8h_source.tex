\doxysection{gpio.\+h}
\hypertarget{gpio_8h_source}{}\label{gpio_8h_source}\index{src/drivers/gpio.h@{src/drivers/gpio.h}}
\mbox{\hyperlink{gpio_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#ifndef\ GPIO\_H}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ GPIO\_H}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{comment}{/*\ -\/-\/\ Includes\ -\/-\/\ */}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stm32f4xx_8h}{stm32f4xx.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{defines_8h}{defines.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{/*\ -\/-\/\ Structs\ -\/-\/\ */}}
\DoxyCodeLine{00024\ \textcolor{keyword}{struct\ }\_\_attribute\_\_((packed))\ \mbox{\hyperlink{structGPIORegs}{GPIORegs}}\ \{}
\DoxyCodeLine{00025\ \ \ REG32\ MODER;}
\DoxyCodeLine{00026\ \ \ REG32\ OTYPER;}
\DoxyCodeLine{00027\ \ \ REG32\ OSPEEDR;}
\DoxyCodeLine{00028\ \ \ REG32\ PUPDR;}
\DoxyCodeLine{00029\ \ \ REG32\ IDR;}
\DoxyCodeLine{00030\ \ \ REG32\ ODR;}
\DoxyCodeLine{00031\ \ \ REG32\ BSSR;}
\DoxyCodeLine{00032\ \ \ REG32\ LCKR;}
\DoxyCodeLine{00033\ \ \ REG32\ AFR[2];}
\DoxyCodeLine{00034\ \};}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{\_Static\_assert}((\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structGPIORegs}{GPIORegs}}))\ ==\ (\textcolor{keyword}{sizeof}(uint32\_t)\ *\ 10U),}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}GPIO\ register\ struct\ size\ mismatch.\ Is\ it\ aligned?"{}});}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#ifndef\ UTEST}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ GPIO(bank)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\ \ (struct\ GPIORegs\ *)(GPIOA\_BASE\ +\ (0x400U\ *\ ((uint8\_t)bank\ -\/\ (uint8\_t)'A')))}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00043\ \textcolor{keyword}{extern}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structGPIORegs}{GPIORegs}}\ *GPIO(\textcolor{keyword}{const}\ uint8\_t\ bank);}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{comment}{/*\ -\/-\/\ Enums\ -\/-\/\ */}}
\DoxyCodeLine{00050\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{gpio_8h_a57c29567ddbfe8b54e5f18925ca257d5}{gp\_bank}}\ \{}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#ifdef\ GPIOA\_BASE}}
\DoxyCodeLine{00052\ \ \ GP\_BANK\_A\ =\ (uint8\_t)\textcolor{charliteral}{'A'},}
\DoxyCodeLine{00053\ \#endif}
\DoxyCodeLine{00054\ \#ifdef\ GPIOB\_BASE}
\DoxyCodeLine{00055\ \ \ GP\_BANK\_B\ =\ (uint8\_t)\textcolor{charliteral}{'B'},}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#ifdef\ GPIOC\_BASE}}
\DoxyCodeLine{00058\ \ \ GP\_BANK\_C\ =\ (uint8\_t)\textcolor{charliteral}{'C'},}
\DoxyCodeLine{00059\ \#endif}
\DoxyCodeLine{00060\ \#ifdef\ GPIOD\_BASE}
\DoxyCodeLine{00061\ \ \ GP\_BANK\_D\ =\ (uint8\_t)\textcolor{charliteral}{'D'},}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#ifdef\ GPIOE\_BASE}}
\DoxyCodeLine{00064\ \ \ GP\_BANK\_E\ =\ (uint8\_t)\textcolor{charliteral}{'E'},}
\DoxyCodeLine{00065\ \#endif}
\DoxyCodeLine{00066\ \#ifdef\ GPIOF\_BASE}
\DoxyCodeLine{00067\ \ \ GP\_BANK\_F\ =\ (uint8\_t)\textcolor{charliteral}{'F'},}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#ifdef\ GPIOG\_BASE}}
\DoxyCodeLine{00070\ \ \ GP\_BANK\_G\ =\ (uint8\_t)\textcolor{charliteral}{'G'},}
\DoxyCodeLine{00071\ \#endif}
\DoxyCodeLine{00072\ \#ifdef\ GPIOH\_BASE}
\DoxyCodeLine{00073\ \ \ GP\_BANK\_H\ =\ (uint8\_t)\textcolor{charliteral}{'H'},}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#ifdef\ GPIOI\_BASE}}
\DoxyCodeLine{00076\ \ \ GP\_BANK\_I\ =\ (uint8\_t)\textcolor{charliteral}{'I'},}
\DoxyCodeLine{00077\ \#endif}
\DoxyCodeLine{00078\ \#ifdef\ GPIOJ\_BASE}
\DoxyCodeLine{00079\ \ \ GP\_BANK\_J\ =\ (uint8\_t)\textcolor{charliteral}{'J'},}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#ifdef\ GPIOK\_BASE}}
\DoxyCodeLine{00082\ \ \ GP\_BANK\_K\ =\ (uint8\_t)\textcolor{charliteral}{'K'},}
\DoxyCodeLine{00083\ \#endif}
\DoxyCodeLine{00084\ \ \ GP\_BANK\_LEN\ \textcolor{comment}{//\ This\ should\ be\ substracted\ with\ 'A'}}
\DoxyCodeLine{00085\ \}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{gpio_8h_ad41a68bf735698334fe528ac7a6d8df2}{gp\_dir}}\ \{}
\DoxyCodeLine{00091\ \ \ GP\_DIR\_IN\ =\ 0x00,}
\DoxyCodeLine{00092\ \ \ GP\_DIR\_OU\ =\ 0x01,}
\DoxyCodeLine{00093\ \ \ GP\_DIR\_AL\ =\ 0x02,}
\DoxyCodeLine{00094\ \ \ GP\_DIR\_AN\ =\ 0x03}
\DoxyCodeLine{00095\ \}\ \mbox{\hyperlink{gpio_8h_a2066c61dfaee27a2e15d2a7f6eb6be53}{gp\_dir\_t}};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00100\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{gpio_8h_ac867e56268c45d8e06cd3f434c4f0ffe}{gp\_otype}}\ \{}
\DoxyCodeLine{00101\ \ \ GP\_OTYPE\_PP\ =\ 0x00,}
\DoxyCodeLine{00102\ \ \ GP\_OTYPE\_OD\ =\ 0x01}
\DoxyCodeLine{00103\ \}\ \mbox{\hyperlink{gpio_8h_abed873c90c4ec9e59dfd97ae7db692a2}{gp\_otype\_t}};}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00108\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{gpio_8h_aa21c3be8ce01487bfa7ff29a74a03d86}{gp\_speed}}\ \{}
\DoxyCodeLine{00109\ \ \ GP\_SPEED\_LOW\ =\ 0x00,}
\DoxyCodeLine{00110\ \ \ GP\_SPEED\_MED\ =\ 0x01,}
\DoxyCodeLine{00111\ \ \ GP\_SPEED\_FAS\ =\ 0x02,}
\DoxyCodeLine{00112\ \ \ GP\_SPEED\_HIG\ =\ 0x03}
\DoxyCodeLine{00113\ \}\ \mbox{\hyperlink{gpio_8h_a20c9c8df4d3bdb4e8b241ae77851972d}{gp\_speed\_t}};}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00118\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{gpio_8h_a17de1fea985582b9c6fe1acc1c130a74}{gp\_pupd}}\ \{}
\DoxyCodeLine{00119\ \ \ GP\_PUPD\_NONE\ =\ 0x00,}
\DoxyCodeLine{00120\ \ \ GP\_PUPD\_PLUP\ =\ 0x01,}
\DoxyCodeLine{00121\ \ \ GP\_PUPD\_PLDO\ =\ 0x02,}
\DoxyCodeLine{00122\ \}\ \mbox{\hyperlink{gpio_8h_a40e057b298dffe6a5e0fa8865394ef30}{gp\_pupd\_t}};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00135\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gpio_8h_a6a487cbaac9afa23608f3614741af248}{gp\_set\_direction}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin,}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_a2066c61dfaee27a2e15d2a7f6eb6be53}{gp\_dir\_t}}\ dir);}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00149\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gpio_8h_a2054ec03056d19ff7ceff26f403dc90f}{gp\_set\_output\_type}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin,}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_abed873c90c4ec9e59dfd97ae7db692a2}{gp\_otype\_t}}\ type);}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00163\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gpio_8h_ae7a1e3ff84b488d75100f9471309ece0}{gp\_set\_speed}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin,}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_a20c9c8df4d3bdb4e8b241ae77851972d}{gp\_speed\_t}}\ speed);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00178\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gpio_8h_a9a6d1660ac4b5055bf2bc88c5f96b78a}{gp\_set\_pupd}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin,}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_a40e057b298dffe6a5e0fa8865394ef30}{gp\_pupd\_t}}\ poopdr);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00192\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gpio_8h_a2c454082c2e6f63ed7dd1c55ab977af5}{gp\_set\_val}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin,\ \textcolor{keyword}{const}\ \_Bool\ value);}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00201\ uint8\_t\ \mbox{\hyperlink{gpio_8h_a3f45fb872ed0fb99979b0427f54293e1}{gp\_read\_val}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin);}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00211\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gpio_8h_aeb74661b8cc6041d9fd52e7d18be0f6f}{gp\_set\_af}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{gpio_8h_ae22c25f9d4e2dcf552d6e7418c7295b9}{gp\_bank\_t}}\ bank,\ \textcolor{keyword}{const}\ uint8\_t\ pin,\ \textcolor{keyword}{const}\ uint8\_t\ af);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ GPIO\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
